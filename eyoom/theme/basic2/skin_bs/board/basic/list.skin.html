<?php if (!defined('_GNUBOARD_')) exit; ?>

<!--{? (_list_href || _write_href) && !_wr_id }-->
<section class="board-write">
	<form name="fwrite" id="fwrite" action="./write_update.php" onsubmit="return fwrite_submit(this);" method="post" enctype="multipart/form-data" autocomplete="off" class="eyoom-form">
	<input type="hidden" name="uid" value="<?php echo get_uniqid(); ?>">
	<input type="hidden" name="w" value="{_w}">
	<input type="hidden" name="bo_table" value="{_bo_table}">
	<input type="hidden" name="wr_id" value="{_wr_id}">
	<input type="hidden" name="sca" value="{_sca}">
	<input type="hidden" name="sfl" value="{_sfl}">
	<input type="hidden" name="stx" value="{_stx}">
	<input type="hidden" name="spt" value="{_spt}">
	<input type="hidden" name="sod" value="{_sod}">
	<input type="hidden" name="board_skin_path" value="{C.EYOOM_CORE_PATH}/board">
	<input type="hidden" name="wr_1" id="wr_1" value="{_wr_1}">
	<input type="hidden" name="wr_2" id="wr_2" value="{_wr_2}">
	<input type="hidden" name="wr_3" id="wr_3" value="{_wr_3}">
  <input type="hidden" name="wr_3" id="wr_4" value="{_wr_4}">
	<input type="hidden" name="wr_5" id="wr_5" value="{_wr_5}">
	<input type="hidden" name="wmode" id="wmode" value="{_wmode}">
	{_option_hidden}
	<div class="tbl_frm01 tbl_wrap">
		<div class="row">
			<div class="col col-12 md-margin-bottom-10">
        <!--{? _is_notice || _is_html || _is_secret || _is_mail || _is_anonymous}-->
					<!--{? _is_notice}-->
					<label for="notice" class="checkbox"><input type="checkbox" id="notice" name="notice" value="1" {_notice_checked}><i></i>공지</label>
					<!--{/}-->

					<!--{? _is_html}-->
					<!--{? _is_dhtml_editor}-->
					<input type="hidden" value="html1" name="html">
					<!--{:}-->
					<label for="html" class="checkbox"><input type="checkbox" id="html" name="html" onclick="html_auto_br(this);" value="{_html_value}" {_html_checked}><i></i>HTML</label>
					<!--{/}-->
					<!--{/}-->

				<!--{/}-->
        <!--{? _is_anonymous}-->
        <label for="anonymous" style="float:left;margin-right:20px;" class="checkbox"><input type="checkbox" id="anonymous" name="anonymous" value="y" checked><i></i>익명글</label>
        <!--{/}-->
				<label for="wr_subject" class="sound_only">제목<strong class="sound_only"> 필수</strong></label>
				<label class="input" style="float:left;width:80%;">
                      <i class="icon-prepend fa fa-edit"></i>
                      <input type="text" name="wr_subject" value="{_subject}" id="wr_subject" required class="form-control" size="50" maxlength="255" placeholder="간편 글쓰기 제목을 입력해 주세요.">
                      <b class="tooltip tooltip-top-left">제목을 입력해 주세요.</b>
                  </label>
			</div>
			<div class="wr_content">
				<!--{* 에디터 사용시는 에디터로, 아니면 textarea 로 노출 *}-->
				<textarea id="wr_content" name="wr_content" class="" maxlength="65536" style="width:100%;height:22px">내용을 입력해 주세요.</textarea>
			</div>
      <div style="float:right;margin-top:10px;">
    		<button type="submit" id="btn_submit" accesskey="s" class="btn-e btn-e-lg btn-e-yellow margin-top-m-2"><i class="fa fa-paper-plane" aria-hidden="true"></i> 작성완료</button>
    	</div>
    </div>
		<div class="margin-hr-10"></div>
	</div>
	</form>
</section>
<!--{/}-->

<script>
$save_val = $("#wr_content").val();
$("#wr_content").click(function(){
  if(!$(this).hasClass('txt_active')) {
    $(this).addClass('txt_active');
  }
  if($(this).val() == $save_val) {
    $(this).val('');
  }
}).focusout(function(){
  if($(this).val() == '') {
    $(this).removeClass('txt_active');
    $(this).val($save_val);
  }
});
function fwrite_submit(f)
{
	<!--{? _is_anonymous}-->
  var wr_1 = '{_wr_1}';
	if($("#anonymous").is(':checked')) {
		wr_1 = wr_1+'|y';
		$("#wr_1").val(wr_1);
	}
	<!--{/}-->

	var subject = "";
	var content = "";
	$.ajax({
		url: g5_bbs_url+"/ajax.filter.php",
		type: "POST",
		data: {
			"subject": f.wr_subject.value,
			"content": f.wr_content.value
		},
		dataType: "json",
		async: false,
		cache: false,
		success: function(data, textStatus) {
			subject = data.subject;
			content = data.content;
		}
	});

	if (subject) {
		alert("제목에 금지단어('"+subject+"')가 포함되어있습니다");
		f.wr_subject.focus();
		return false;
	}

	if (content) {
		alert("내용에 금지단어('"+content+"')가 포함되어있습니다");
		if (typeof(ed_wr_content) != "undefined")
			ed_wr_content.returnFalse();
		else
			f.wr_content.focus();
		return false;
	}
	document.getElementById("btn_submit").disabled = "disabled";

	return true;
}
</script>

<style>
.margin-hr-0 {height:1px;border-top:1px dotted #ddd;margin:0 0 10px;clear:both}
.margin-hr-10 {height:1px;border-top:1px dotted #ddd;margin:10px 0;clear:both}
.margin-top-m-2 {margin-top:-2px}
.board-write .board-write-title {border-bottom:1px solid #e5e5e5;padding-bottom:10px}
.board-write .tbl_frm01 textarea {width:97% !important;height:200px;border:1px solid #ddd;background:#fafafa;padding:10px;line-height:1.5}
@media (max-width: 767px) {
	.board-write .tbl_frm01 textarea {width:94% !important}
}
.board-write .input-group-btn .btn {cursor:inherit}
.board-write .write-function-box {margin-top:10px;border:1px solid #e5e5e5;padding:15px 10px}
#char_count_desc {display:block;margin:0 0 5px;padding:0}
#char_count_wrap {margin:5px 0 0;text-align:right}
#char_count {font-weight:bold}
#autosave_wrapper {position:relative}
#autosave_pop {display:none;z-index:10;position:absolute;top:10px;right:10px;padding:8px;width:320px;height:auto !important;height:180px;max-height:180px;border:1px solid #565656;background:#fff;overflow-y:scroll}
html.no-overflowscrolling #autosave_pop {height:auto;max-height:10000px !important}
#autosave_pop strong {position:absolute;font-size:0;line-height:0;overflow:hidden}
#autosave_pop div {text-align:right}
#autosave_pop button {margin:0;padding:0;border:0;background:transparent;margin-left:10px}
#autosave_pop ul {margin:10px 0;padding:0;border-top:1px solid #e9e9e9;list-style:none}
#autosave_pop li {padding:8px 5px;border-bottom:1px solid #e9e9e9;zoom:1}
#autosave_pop li:after {display:block;visibility:hidden;clear:both;content:""}
#autosave_pop a {display:block;float:left}
#autosave_pop span {display:block;float:right}
.autosave_close {cursor:pointer}
.autosave_content {display:none}
/* Tag Style */
#tag-box {border:1px dashed #ddd;min-height:20px;padding:5px;background:#fff;margin-top:10px}
#tag-cloud div {border:1px solid #c38c8c;background:#f2dede;padding:1px 5px;display:inline-block;margin:2px 3px;font-size:11px;color:#000}
.blind {position:absolute;top:-10px;left:-100000px;display:none;}
/* Smart Editor Style */
.cke_sc {margin-bottom:10px}
.btn_cke_sc {padding:0 10px}
.cke_sc_def {padding:10px;margin-bottom:10px;margin-top:10px}
.cke_sc_def button {padding:3px 15px;background:#53535a;color:#fff;border:none}
/* CK Editor Style */
.cke_chrome {border:1px solid #ddd !important;box-shadow:none !important}
.cke_top {background:#fafafa !important;border-bottom:1px solid #ddd !important;box-shadow:none !important}
.cke_bottom {background:#fafafa !important;border-top:1px solid #ddd !important;box-shadow:none !important}
.cke_toolgroup {border:1px solid #c5c5c5 !important;border-bottom-color:#c5c5c5 !important;box-shadow:none !important;background:#fff !important;background-image:none !important}
.cke_combo_button {border:1px solid #c5c5c5 !important;border-bottom-color:#c5c5c5 !important;box-shadow:none !important;background:#fff !important;background-image:none !important}
/* Summernote Style */
.board-write .panel-default > .panel-heading {background:#f5f5f5;padding:0 0 5px 5px}
.board-write .note-editor {overflow:inherit}
.board-write .note-editor .note-toolbar .btn-group {display:inline-block;position:relative;vertical-align:middle;}
.board-write .note-editor .note-toolbar .btn-group .btn {padding:5px 10px !important;background-color:#fff;border:1px solid #ccc;margin-left:-1px}
.board-write .note-editor .note-toolbar .btn-group .btn:hover {background-color:#e6e6e6;border-color:#adadad}
.board-write .note-editor .panel-heading.note-toolbar .note-color-palette div .note-color-btn {width:18px;height:18px;padding:0;margin:0;border:1px solid #fff}
.note-dialog .btn {display:inline-block;padding:6px 12px;margin-bottom:0;font-size:12px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent}
.note-dialog .form-group {margin-bottom:15px;margin-right:0;margin-left:0}
.note-dialog .btn-primary {color: #fff;background-color:#428bca;border-color:#357ebd}
.note-dialog .btn.disabled, .note-dialog .btn[disabled] {pointer-events:none;cursor:not-allowed;filter:alpha(opacity=65);-webkit-box-shadow:none;box-shadow:none;opacity:.65}
.note-dialog .btn-primary.disabled, .note-dialog .btn-primary[disabled] {background-color:#428bca;border-color:#357ebd}
.note-dialog label {display:block;max-width:100%;margin-bottom:5px;font-weight:700}
.note-dialog .input {margin:0;font:inherit;color:inherit}
.note-dialog .form-control {display:block;width:100%;padding:6px 12px;font-size:14px;line-height:1.42857143;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;-webkit-transition:border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s;-o-transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s}
.board-write .note-editor .table-bordered>thead>tr>th, .board-write .note-editor .table-bordered>tbody>tr>th, .board-write .note-editor .table-bordered>tfoot>tr>th, .board-write .note-editor .table-bordered>thead>tr>td, .board-write .note-editor .table-bordered>tbody>tr>td, .board-write .note-editor .table-bordered>tfoot>tr>td {border:1px solid #ddd}
#wr_content {-webkit-transition:height ease-in-out .2s;-moz-transition:height ease-in-out .2s;-o-transition:height ease-in-out .2s;transition:height ease-in-out .2s;}
#wr_content.txt_active{height:110px !important;}
</style>

























<div class="board-list">
    <!--{* 게시판 페이지 정보 및 버튼 시작 *}-->
    <div class="board-info margin-bottom-10">
        <div class="pull-left margin-top-5 font-size-12 color-grey">
            <span>Total {=number_format(_total_count)}건</span> {_page} 페이지
        </div>
		<!--{? _write_href}-->
		<div class="pull-right">
	        <!--{?_admin_href}--><a href="{_admin_href}" class="btn-e btn-e-dark margin-right-5" type="button">관리자</a><!--{/}-->
			<!--{?_eyoom_href}--><a href="{_eyoom_href}" class="btn-e btn-e-dark margin-right-5" type="button">이윰설정</a><!--{/}-->
	        <!--{?_write_href}--><a href="{_write_href}" class="btn-e btn-e-red" type="button">글쓰기</a><!--{/}-->
		</div>
        <!--{/}-->
        <div class="clearfix"></div>
    </div>
    <!--{* 게시판 페이지 정보 및 버튼 끝 *}-->

	<!--{? _is_admin}-->
    <form name="fboardlist" id="fboardlist" action="./board_list_update.php" onsubmit="return fboardlist_submit(this);" method="post" class="eyoom-form">
    <input type="hidden" name="bo_table" value="{_bo_table}">
    <input type="hidden" name="sfl" value="{_sfl}">
    <input type="hidden" name="stx" value="{_stx}">
    <input type="hidden" name="spt" value="{_spt}">
    <input type="hidden" name="sca" value="{_sca}">
    <input type="hidden" name="page" value="{_page}">
    <input type="hidden" name="sw" value="">
	<!--{/}-->
	<div class="table-list-eb margin-bottom-20">
	    <div class="board-list-body">
        <!--{@ list}-->
        <ul id="lboard">
        <!--{? .is_notice}--><li class="notice"><!--{: _wr_id == .wr_id}--><li class="active"><!--{:}--><li><!--{/}-->
          <div class="subject">
            <!--{? _is_checkbox}-->
            <span class="lst_chk">
              <label for="chk_wr_id_{.key_}" class="sound_only">{.subject}</label>
              <label class="checkbox">
                <input type="checkbox" name="chk_wr_id[]" value="{.wr_id}" id="chk_wr_id_{.key_}"><i></i>
              </label>
            </span>
            <span class="board-num">{=number_format(.num)}</span>
            <!--{/}-->
            <a href="{.href}">
              <span class="td-name-in">{.wr_name}</span>
              {.subject}
              <!--{?.icon_new}--><i class="fa fa-circle"></i>&nbsp;<!--{/}-->
              <!--{?.icon_secret}--><i class="fa fa-lock"></i>&nbsp;<!--{/}-->
              <div class="lcontents">
              <?=cut_str(strip_tags({.wr_content}), 100)?>
              </div>
              <!--{? .gnu_icon}-->
              <span style="display:inline-block;margin-right:2px"><img src="{.gnu_icon}" align="absmiddle"></span>
              <!--{/}-->
              <!--{? .eyoom_icon}-->
              <span style="display:inline-block;margin-right:2px"><img src="{.eyoom_icon}" align="absmiddle"></span>
              <!--{/}-->
            </a>
          </div>
          <div class="ldes">
            <span class="lcomment">
            <!--{? .comment_cnt}--><span class="sound_only">댓글</span><span class="td-comment">+{.comment_cnt}</span><!--{/}-->
            </span>
            <span class="lhit">
            {=number_format(.wr_hit)}
            </span>
            <span class="lvote">
            <!--{?_is_good}-->{=number_format(.wr_good)}<!--{/}-->
            <!--{?_is_nogood}-->{=number_format(.wr_nogood)}<!--{/}-->
            </span>
            <span class="ldate">
            <!--{? eyoom_board.bo_sel_date_type == '1'}-->
            {eb->date_time('Y.m.d',.wr_datetime)}
            <!--{: eyoom_board.bo_sel_date_type == '2'}-->
            {eb->date_format('Y.m.d',.wr_datetime)}
            <!--{/}-->
            </span>
          </div>
        </li>
      </ul>
			        <!--{:}-->

					<span class="text-center">게시물이 없습니다.</span>
					<!--{/}-->
	    </div>
	</div>
    <div class="board-list-footer">
	    <div class="pull-left">
	        <!--{? _is_checkbox}-->
	        <ul class="list-unstyled board-btn-adm pull-left">
	            <li><button class="btn-e btn-e-light-grey" type="submit" name="btn_submit" value="선택삭제" onclick="document.pressed=this.value">선택삭제</button></li>
	            <li><button class="btn-e btn-e-light-grey" type="submit" name="btn_submit" value="선택복사" onclick="document.pressed=this.value">선택복사</button></li>
	            <li><button class="btn-e btn-e-light-grey" type="submit" name="btn_submit" value="선택이동" onclick="document.pressed=this.value">선택이동</button></li>
	        </ul>
	        <!--{/}-->
	        <span class="pull-left">
	        	<!--{?_rss_href}--><a href="{_rss_href}" class="btn-e btn-e-yellow" type="button"><i class="fa fa-rss"></i></a><!--{/}-->
				<a href="javascript:;" class="btn-e btn-e-dark" type="button" data-toggle="modal" data-target=".search-modal"><i class="fa fa-search"></i></a>
	        </span>
	    </div>
	    <div class="pull-right">
	        <!--{? _list_href || _write_href}-->
	        <ul class="list-unstyled">
	            <!--{? _write_href}--><li><a href="{_write_href}" class="btn-e btn-e-red" type="button">글쓰기</a></li><!--{/}-->
	        </ul>
	        <!--{/}-->
	    </div>
	    <div class="clearfix"></div>
	</div>
	<!--{? _is_admin}--></form><!--{/}-->
</div>

<!--{* Small modal *}-->
<div class="modal fade search-modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-sm">
		<div class="modal-content">
			<div class="modal-header">
				<button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
				<h5 id="myLargeModalLabel" class="modal-title"><strong>{board.bo_subject} 검색</strong></h5>
			</div>
			<div class="modal-body">
				<!--{* 게시판 검색 시작 *}-->
				<fieldset id="bo_sch" class="eyoom-form">
					<!--legend>게시물 검색</legend-->
				    <form name="fsearch" method="get">
				    <input type="hidden" name="bo_table" value="{_bo_table}">
				    <input type="hidden" name="sca" value="{_sca}">
				    <input type="hidden" name="sop" value="and">
				    <label for="sfl" class="sound_only">검색대상</label>
				    <section class="margin-top-10">
					    <label class="select">
						    <select name="sfl" id="sfl" class="form-control">
						        <option value="wr_subject"{=get_selected(_sfl, 'wr_subject', true)}>제목</option>
						        <option value="wr_content"{=get_selected(_sfl, 'wr_content')}>내용</option>
						        <option value="wr_subject||wr_content"{=get_selected(_sfl, 'wr_subject||wr_content')}>제목+내용</option>
						    </select>
						    <i></i>
					    </label>
				    </section>
				    <section>
					    <div class="input-group">
					        <label for="stx" class="sound_only">검색어<strong class="sound_only"> 필수</strong></label>
					        <label class="input">
					        	<input type="text" name="stx" value="{=stripslashes(_stx)}" required id="stx" class="form-control">
					        </label>
					        <span class="input-group-btn">
					            <button class="btn btn-default btn-e-group" type="submit" value="검색">검색</button>
					        </span>
					    </div>
				    </section>
				    </form>
				</fieldset>
				<!--{* 게시판 검색 끝 *}-->
			</div>
            <div class="modal-footer">
                <button data-dismiss="modal" class="btn-e btn-e-dark" type="button">닫기</button>
            </div>
		</div>
	</div>
</div>
<iframe name="photoframe" id="photoframe" style="display:none;"></iframe>
<!--{* End Small Modal *}-->

<!--{?_is_checkbox}-->
<noscript>
<p>자바스크립트를 사용하지 않는 경우<br>별도의 확인 절차 없이 바로 선택삭제 처리하므로 주의하시기 바랍니다.</p>
</noscript>
<!--{/}-->

<!--{* 페이지 *}-->
{=eb_paging('basic')}

<div class="margin-bottom-30"></div>

<style>
.board-list .eyoom-form .radio i, .board-list .eyoom-form .checkbox i {top:2px}
.board-list .bo_current {color:#f44455}
.board-list .tab-e2 .nav-tabs li.active a {border:1px solid #000;border-top:1px solid #f44455}
.table-list-eb .table thead > tr > th {border-bottom:1px solid #000}
.table-list-eb .table tbody > tr > td {padding:8px 5px}
.table-list-eb .table-hover>tbody>tr:hover>td, .table-hover>tbody>tr:hover>th {background:#fafafa}
.table-list-eb thead {border-top:1px solid #000;border-bottom:1px solid #000;background:#fff}
.table-list-eb th {color:#000;font-weight:bold;white-space:nowrap}
.table-list-eb .td-comment {display: inline-block;min-width:35px;padding:0px 0px;font-size:10px;font-weight:300;line-height:13px;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;background-color:#74747a;margin-right:5px}
.table-list-eb .td-comment .cnt_cmt {font-weight:300}
.table-list-eb .td-subject {width:300px}
.table-list-eb .td-subject .fa {color:#f44455}
@media (max-width: 1199px) {
	.table-list-eb .td-subject {width:260px}
}
@media (max-width: 767px) {
	.table-list-eb .td-width {width:inherit}
	.table-list-eb .td-subject {width:280px}
}
.table-list-eb .td-photo img {width:20px;height:20px;margin-right:2px}
.table-list-eb .td-photo .td-user-icon {width:20px;height:20px;font-size:14px;line-height:20px;text-align:center;background:#84848a;color:#fff;margin-right:2px;display:inline-block;white-space:nowrap;vertical-align:baseline}
.table-list-eb .td-name b {font-weight:normal}
.table-list-eb .td-date {text-align:center}
.table-list-eb .td-num {text-align:center}
.table-list-eb .td-mobile td {border-top:1px solid #f0f0f0;padding:4px 5px !important;font-size:10px;color:#999;background:#fcfcfc}
.table-list-eb .td-mobile td span {margin-right:5px}
.table-list-eb .td-mobile td span.td-photo {margin-right:0}
.table-list-eb .td-mobile td .td-mobile-name b {font-weight:normal}
.board-notice {background:#fffcea}
.board-btn-adm li {float:left;margin-right:5px}
.board-list .star-ratings-list li {padding:0;float:left;margin-right:0px}
.board-list .star-ratings-list li .rating {color:#ccc;font-size:10px;line-height:normal}
.board-list .star-ratings-list li .rating-selected {color:#f44455;font-size:10px}
</style>

<!--{?_is_checkbox}-->
<script>
function all_checked(sw) {
    var f = document.fboardlist;
    for (var i=0; i<f.length; i++) {
        if (f.elements[i].name == "chk_wr_id[]")
            f.elements[i].checked = sw;
    }
}

function fboardlist_submit(f) {
    var chk_count = 0;
    for (var i=0; i<f.length; i++) {
        if (f.elements[i].name == "chk_wr_id[]" && f.elements[i].checked)
            chk_count++;
    }
    if (!chk_count) {
        alert(document.pressed + "할 게시물을 하나 이상 선택하세요.");
        return false;
    }
    if(document.pressed == "선택복사") {
        select_copy("copy");
        return;
    }
    if(document.pressed == "선택이동") {
        select_copy("move");
        return;
    }
    if(document.pressed == "선택삭제") {
        if (!confirm("선택한 게시물을 정말 삭제하시겠습니까?\n\n한번 삭제한 자료는 복구할 수 없습니다\n\n답변글이 있는 게시글을 선택하신 경우\n답변글도 선택하셔야 게시글이 삭제됩니다."))
            return false;
        f.removeAttribute("target");
        f.action = "./board_list_update.php";
    }
    return true;
}

// 선택한 게시물 복사 및 이동
function select_copy(sw) {
    var f = document.fboardlist;
    if (sw == "copy")
        str = "복사";
    else
        str = "이동";

    var sub_win = window.open("", "move", "left=50, top=50, width=500, height=550, scrollbars=1");
    f.sw.value = sw;
    f.target = "move";
    f.action = "./move.php";
    f.submit();
}
</script>
<!--{/}-->
